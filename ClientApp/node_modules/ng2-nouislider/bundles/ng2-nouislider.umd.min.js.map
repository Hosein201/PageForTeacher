{"version":3,"file":"ng2-nouislider.umd.min.js","sources":["~/ng2-nouislider/src/ng2-nouislider.component.ts","~/ng2-nouislider/src/ng2-nouislider.module.ts"],"sourcesContent":["import * as noUiSlider from 'nouislider';\nimport {\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnInit,\n  OnChanges,\n  Output,\n  Renderer2\n} from '@angular/core';\nimport {\n  ControlValueAccessor,\n  FormControl,\n  NG_VALUE_ACCESSOR\n} from '@angular/forms';\n\nexport interface NouiFormatter {\n  to(value: number): string;\n  from(value: string): number;\n}\n\nexport class DefaultFormatter implements NouiFormatter {\n  to(value: number): string {\n    // formatting with http://stackoverflow.com/a/26463364/478584\n    return String(parseFloat(parseFloat(String(value)).toFixed(2)));\n  };\n\n  from(value: string): number {\n    return parseFloat(value);\n  }\n}\n\n@Component({\n  selector: 'nouislider',\n  host: {\n    '[class.ng2-nouislider]': 'true'\n  },\n  template: '<div [attr.disabled]=\"disabled ? true : undefined\"></div>',\n  styles: [`\n    :host {\n      display: block;\n      margin-top: 1rem;\n      margin-bottom: 1rem;\n    }\n  `],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NouisliderComponent),\n      multi: true\n    }\n  ]\n})\nexport class NouisliderComponent implements ControlValueAccessor, OnInit, OnChanges {\n\n  public slider: any;\n  public handles: any[];\n  @Input() public disabled: boolean; // tslint:disable-line\n  @Input() public behaviour: string;\n  @Input() public connect: boolean[];\n  @Input() public limit: number;\n  @Input() public min: number;\n  @Input() public max: number;\n  @Input() public snap: boolean;\n  @Input() public animate: boolean | boolean[];\n  @Input() public range: any;\n  @Input() public step: number;\n  @Input() public format: NouiFormatter;\n  @Input() public pageSteps: number;\n  @Input() public config: any = {};\n  @Input() public ngModel: number | number[];\n  @Input() public keyboard: boolean;\n  @Input() public onKeydown: any;\n  @Input() public formControl: FormControl;\n  @Input() public tooltips: Array<any>;\n  @Output() public change: EventEmitter<any> = new EventEmitter(true);\n  @Output() public update: EventEmitter<any> = new EventEmitter(true);\n  @Output() public slide: EventEmitter<any> = new EventEmitter(true);\n  @Output() public set: EventEmitter<any> = new EventEmitter(true);\n  @Output() public start: EventEmitter<any> = new EventEmitter(true);\n  @Output() public end: EventEmitter<any> = new EventEmitter(true);\n  private value: any;\n  private onChange: any = Function.prototype;\n  private onTouched: any = Function.prototype;\n\n  constructor(private el: ElementRef, private renderer : Renderer2) { }\n\n  ngOnInit(): void {\n    let inputsConfig = JSON.parse(JSON.stringify({\n      behaviour: this.behaviour,\n      connect: this.connect,\n      limit: this.limit,\n      start: this.formControl !== undefined ? this.formControl.value : this.ngModel,\n      step: this.step,\n      pageSteps: this.pageSteps,\n      keyboard: this.keyboard,\n      onKeydown: this.onKeydown,\n      range: this.range || this.config.range || {min: this.min, max: this.max},\n      tooltips: this.tooltips,\n      snap: this.snap,\n      animate: this.animate\n    }));\n    inputsConfig.tooltips = this.tooltips || this.config.tooltips;\n    inputsConfig.format = this.format || this.config.format || new DefaultFormatter();\n\n    this.slider = noUiSlider.create(\n      this.el.nativeElement.querySelector('div'),\n      Object.assign(this.config, inputsConfig)\n    );\n\n    this.handles = [].slice.call(this.el.nativeElement.querySelectorAll('.noUi-handle'));\n\n    if(this.config.keyboard) {\n      if(this.config.pageSteps === undefined) {\n        this.config.pageSteps = 10;\n      }\n      for(let handle of this.handles) {\n        handle.setAttribute('tabindex', 0);\n        handle.addEventListener('click', () => {\n          handle.focus();\n        });\n        if(this.config.onKeydown === undefined) {\n          handle.addEventListener('keydown', this.defaultKeyHandler);\n        } else {\n          handle.addEventListener('keydown', this.config.onKeydown);\n        }\n      }\n    }\n\n    this.slider.on('set', (values: string[], handle: number, unencoded: number[]) => {\n      this.eventHandler(this.set, values, handle, unencoded);\n    });\n\n    this.slider.on('update', (values: string[], handle: number, unencoded: number[]) => {\n      this.update.emit(this.toValues(values));\n    });\n\n    this.slider.on('change', (values: string[], handle: number, unencoded: number[]) => {\n      this.change.emit(this.toValues(values));\n    });\n\n    this.slider.on('slide', (values: string[], handle: number, unencoded: number[]) => {\n      this.eventHandler(this.slide, values, handle, unencoded);\n    });\n\n    this.slider.on('start', (values: string[], handle: number, unencoded: number[]) => {\n      this.start.emit(this.toValues(values));\n    });\n\n    this.slider.on('end', (values: string[], handle: number, unencoded: number[]) => {\n      this.end.emit(this.toValues(values));\n    });\n  }\n\n  ngOnChanges(changes: any) {\n    if (this.slider && (changes.min || changes.max || changes.step || changes.range)) {\n      setTimeout(() => {\n        this.slider.updateOptions({\n          range: Object.assign({}, {\n            min: this.min,\n            max: this.max\n          }, this.range || {}),\n          step: this.step\n        });\n      });\n    }\n  }\n\n  toValues(values: string[]): any | any[] {\n    let v = values.map(this.config.format.from);\n    return (v.length == 1 ? v[0] : v);\n  }\n\n  writeValue(value: any): void {\n    if (this.slider) {\n      setTimeout(() => {\n        this.slider.set(value);\n      });\n    }\n  }\n\n  registerOnChange(fn: (value: any) => void) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => {}): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    isDisabled\n      ? this.renderer.setAttribute(this.el.nativeElement.childNodes[0], 'disabled', 'true')\n      : this.renderer.removeAttribute(this.el.nativeElement.childNodes[0], 'disabled');\n  }\n\n  private eventHandler = (emitter: EventEmitter<any>, values: string[], handle: number, unencoded: number[]) => {\n    let v = this.toValues(values);\n    let emitEvents = false;\n    if(this.value === undefined) {\n      this.value = v;\n      return;\n    }\n    if(Array.isArray(v) && this.value[handle] != v[handle]) {\n      emitEvents = true;\n    }\n    if(!Array.isArray(v) && this.value != v) {\n      emitEvents = true;\n    }\n    if(emitEvents) {\n      emitter.emit(v);\n      this.onChange(v);\n    }\n    if(Array.isArray(v)) {\n      this.value[handle] = v[handle];\n    } else {\n      this.value = v;\n    }\n  }\n\n  private defaultKeyHandler = (e: KeyboardEvent) => {\n    let stepSize: any[] = this.slider.steps();\n    let index = parseInt((<HTMLElement>e.target).getAttribute('data-handle'));\n    let sign = 1;\n    let multiplier: number = 1;\n    let step = 0;\n    let delta = 0;\n\n    switch ( e.which ) {\n      case 34:  // PageDown\n        multiplier = this.config.pageSteps;\n      case 40:  // ArrowDown\n      case 37:  // ArrowLeft\n        sign = -1;\n        step = stepSize[index][0];\n        e.preventDefault();\n        break;\n\n      case 33:  // PageUp\n        multiplier = this.config.pageSteps;\n      case 38:  // ArrowUp\n      case 39:  // ArrowRight\n        step = stepSize[index][1];\n        e.preventDefault();\n        break;\n\n      default:\n        break;\n    }\n\n    delta = sign * multiplier * step;\n    let newValue: number | number[];\n\n    if(Array.isArray(this.value)) {\n      newValue = [].concat(this.value);\n      newValue[index] = newValue[index] + delta;\n    } else {\n      newValue = this.value + delta;\n    }\n\n    this.slider.set(newValue);\n  }\n}\n\n","import {NgModule} from \"@angular/core\";\nimport {NouisliderComponent} from \"./ng2-nouislider.component\";\n\n@NgModule({\n    exports: [NouisliderComponent],\n    declarations: [NouisliderComponent],\n})\nexport class NouisliderModule { }\n"],"names":["DefaultFormatter","prototype","to","value","String","parseFloat","toFixed","from","NouisliderComponent","ngOnInit","_this","this","inputsConfig","JSON","parse","stringify","behaviour","connect","limit","start","formControl","undefined","ngModel","step","pageSteps","keyboard","onKeydown","range","config","min","max","tooltips","snap","animate","format","slider","noUiSlider.create","el","nativeElement","querySelector","Object","assign","handles","slice","call","querySelectorAll","_loop_1","handle","setAttribute","addEventListener","focus","this_1","defaultKeyHandler","_i","_a","length","on","values","unencoded","eventHandler","set","update","emit","toValues","change","slide","end","ngOnChanges","changes","setTimeout","updateOptions","v","map","writeValue","registerOnChange","fn","onChange","registerOnTouched","onTouched","setDisabledState","isDisabled","renderer","childNodes","removeAttribute","EventEmitter","Function","emitter","emitEvents","Array","isArray","e","delta","newValue","stepSize","steps","index","parseInt","getAttribute","sign","multiplier","which","preventDefault","concat","decorators","type","Component","args","selector","host","[class.ng2-nouislider]","template","styles","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","ctorParameters","ElementRef","Renderer2","propDecorators","disabled","Input","Output","NouisliderModule","NgModule","exports","declarations"],"mappings":"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"}
